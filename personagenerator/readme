retrospective_report.py -> 회고 리포트 생성
test_retrospective.py -> 회고 리포트 생성 테스트 파일 (사용자 이메일 입력)


개인화 회고 리포트 생성기
개요
이 Python 스크립트는 머신러닝과 데이터 분석 기술을 활용하여 개인화된 주간 회고 리포트를 생성하는 정교한 시스템입니다. 캘린더 일정, 대화 기록, 사용자 성향을 결합하여 사용자의 주간 활동, 감정, 패턴에 대한 통찰력 있는 요약을 제공합니다.
주요 기능

📅 캘린더 일정 분석

주간 일정 데이터 추출 및 분석
활동 유형, 시간 분배, 반복 패턴 식별


💬 대화 기록 인사이트

사용자 대화 처리
키워드, 감정, 주요 대화 주제 추출


🔍 감정 추적

다양한 활동에 따른 감정 상태 분석
사용자의 감정적 웰빙에 대한 인사이트 제공


🤖 AI 기반 리포트 생성

OpenAI의 GPT 모델을 사용한 개인화된 리포트 생성
데이터 분석과 리포트 작성의 2단계 분석



구성 요소
주요 클래스 및 함수

RetrospectiveReportGenerator: 다음을 담당하는 핵심 클래스

사용자 데이터 로드
캘린더 일정 분석
대화 기록 처리
상세 분석 프롬프트 생성
개인화된 회고 리포트 생성



주요 메서드

_load_calendar_events(): 지난 주의 캘린더 일정 로드 및 필터링
_analyze_calendar_data(): 캘린더 일정에 대한 심층 분석
_analyze_chat_data(): 대화 기록에서 인사이트 추출
generate_retrospective_report(): 최종 회고 리포트 생성

API 엔드포인트
POST /generate-retrospective-report

특정 사용자의 새로운 회고 리포트 생성
요청 본문에 user_id 필요

GET /get-retrospective-reports

사용자의 저장된 회고 리포트 조회
user_id를 쿼리 파라미터로 수락

종속성

FastAPI
OpenAI Python 라이브러리
Python 3.8 이상
추가 라이브러리: zoneinfo, typing, json, datetime

환경 설정

필요한 종속성 설치:
bashCopypip install fastapi openai

환경 변수 설정:

OPENAI_API_KEY: OpenAI API 키

==============================================================================
<감정/대화 분석 반영 리포트>

=== 회고 리포트 생성 시작 ===
처리 중입니다... (최대 1분 소요될 수 있습니다)
사용자 성향 파일을 찾을 수 없음: data/faiss\ica.2team02@gmail.com_tendency.json

=== 데이터 분석 진행 중... ===


=== 데이터 분석 결과 ===

1. 활동 패턴:
사용자는 이메일 활동이 가장 빈번하며, 주로 아침 시간대에 활동을 집중하는 경향이 있습니다. 주로 작업 및 운동을 하며, 주말보다는 주중에 활동이 활발합니다. 가장  자주 등장하는 활동은 이메일 활동으로, 규칙적인 아침 시간대에 집중되어 있습니다.

2. 감정 분석:
사용자는 걷기 운동 시 가장 긍정적인 감정을 느끼며, 헬스 운동 시 부정적인 감정을 경험합니다. 일상적인 운동 활동이 긍정적인 영향을 미치는 것으로 보입니다.

3. 대화 내용 분석:
사용자의 주요 관심사는 업무, 여가, 건강, 창작으로 나타났습니다. 대화에서는 힘든 상황을 언급하거나 좋은 경험을 나누는 등 감정적인 측면이 강조되었습니다. 이러한 관심사와 감정은 사용자의 일정과 연관성이 있을 수 있습니다.

4. 균형 및 습관:
사용자는 업무와 여가, 신체 활동과 정적 활동을 균형 있게 유지하려는 모습을 보입니다. 주로 운동을 통해 신체 활동을 즐기고, 업무와 창작을 통해 정적 활동을 즐기는 패턴을 보입니다.

5. 키워드 분석:
주요 활동 키워드인 확인, 유튜브, 걷기, 운동이 사용자의 일정을 대표하는 키워드로 나타났습니다. 이를 통해 사용자의 활동 성향과 관심사를 파악할 수 있습니다.

6. 개인 맞춤 인사이트:
사용자는 규칙적인 아침 활동을 선호하며, 운동을 통해 긍정적인 감정을 느끼는 경향이 있습니다. 업무와 여가를 균형 있게 유지하며, 창작을 통해 자아실현을 추구하는  독특한 특성을 가지고 있습니다. 이를 통해 사용자의 일상적인 패턴과 성향을 이해할 수 있습니다.

========================


=== 회고 리포트 생성 중... ===


=== 회고 리포트 생성 완료 ===


=== 생성 결과 ===

1. 데이터 분석 결과:
----------------------------------------
1. 활동 패턴:
사용자는 이메일 활동이 가장 빈번하며, 주로 아침 시간대에 활동을 집중하는 경향이 있습니다. 주로 작업 및 운동을 하며, 주말보다는 주중에 활동이 활발합니다. 가장  자주 등장하는 활동은 이메일 활동으로, 규칙적인 아침 시간대에 집중되어 있습니다.

2. 감정 분석:
사용자는 걷기 운동 시 가장 긍정적인 감정을 느끼며, 헬스 운동 시 부정적인 감정을 경험합니다. 일상적인 운동 활동이 긍정적인 영향을 미치는 것으로 보입니다.       

3. 대화 내용 분석:
사용자의 주요 관심사는 업무, 여가, 건강, 창작으로 나타났습니다. 대화에서는 힘든 상황을 언급하거나 좋은 경험을 나누는 등 감정적인 측면이 강조되었습니다. 이러한 관심사와 감정은 사용자의 일정과 연관성이 있을 수 있습니다.

4. 균형 및 습관:
사용자는 업무와 여가, 신체 활동과 정적 활동을 균형 있게 유지하려는 모습을 보입니다. 주로 운동을 통해 신체 활동을 즐기고, 업무와 창작을 통해 정적 활동을 즐기는 패턴을 보입니다.

5. 키워드 분석:
주요 활동 키워드인 확인, 유튜브, 걷기, 운동이 사용자의 일정을 대표하는 키워드로 나타났습니다. 이를 통해 사용자의 활동 성향과 관심사를 파악할 수 있습니다.      

6. 개인 맞춤 인사이트:
사용자는 규칙적인 아침 활동을 선호하며, 운동을 통해 긍정적인 감정을 느끼는 경향이 있습니다. 업무와 여가를 균형 있게 유지하며, 창작을 통해 자아실현을 추구하는  독특한 특성을 가지고 있습니다. 이를 통해 사용자의 일상적인 패턴과 성향을 이해할 수 있습니다.
----------------------------------------

2. 회고 리포트:
----------------------------------------
============================================================================================

✨ 활동 패턴을 분석해봤어요.
사용자는 주로 아침 시간대에 활동을 집중하며, 가장 빈번한 활동은 이메일 확인이에요. 주중에 더 활발히 활동하고, 주말에는 비교적 여유를 즐기는 모습이에요. 규칙적 인 아침 활동을 통해 하루를 시작하는 패턴이 강하게 드러나요. 주요 활동은 이메일 확인, 유튜브 시청, 걷기 운동으로 나타났고, 이는 사용자의 관심사를 잘 보여주고 있어요.

✨ 일정별 감정을 분석해봤어요.
전체적으로 사용자의 평균 감정 점수는 3.13/5점이에요. 걷기 운동 시에는 5점으로 가장 긍정적인 감정을 느끼고, 헬스 운동에서는 1점으로 부정적인 감정을 경험했어요. 주로 업무와 창작에 대한 대화가 많았으며, '너무', '힘들었어', '좋았어' 같은 감정적 단어가 자주 사용되었어요. 다음 주에는 헬스 운동 대신 더 즐길 수 있는 다른 운 동을 시도해보는 것도 좋겠어요. 감정 점수가 낮은 활동을 피하고, 높은 점수를 기록한 걷기 운동을 더 자주 해보세요.

✨ 지난주 일정과 감정 데이터를 바탕으로 몇 가지 인사이트를 도출했어요.
1. 사용자는 규칙적인 아침 활동을 선호하며, 이를 통해 긍정적인 감정을 느끼고 있어요.
2. 운동은 사용자의 웰빙에 큰 영향을 미치며, 특히 걷기 운동은 매우 긍정적이에요.
3. 업무와 여가, 신체 활동과 정적 활동을 균형 있게 유지하려는 모습을 보여주고 있어요.
4. 창작 활동에 대해 강한 관심을 가지고 있으며, 이는 자아실현으로 이어질 수 있어요.

🔍 다음 주는 이렇게 해보면 어떨까요?
   1. 즐거운 운동 찾기

헬스 대신 다른 즐길 수 있는 운동을 찾아보세요. 예를 들어, 요가나 필라테스처럼 더 편안한 운동을 시도해보세요.
걷기 운동을 지속하며, 다양한 경로를 시도해보세요.

2. 감정 관리

하루 중 시간을 정해 명상이나 호흡 운동을 통해 마음을 가라앉히세요.
업무와 개인 시간을 명확히 구분하고, 일과 후에는 휴식을 취하며 재충전하세요.

3. 창작과 업무의 균형 잡기

작은 목표를 설정하고, 단계적으로 달성해보세요. 창작 과정을 즐길 수 있는 환경을 조성해보세요.
중요한 업무에는 우선순위를 두고, 집중이 필요한 시간대를 파악해 그 시간에 창작 활동을 배치하세요.

🌷 이 한 문장만 기억해요
   "긍정적인 감정과 작은 성취가 모여 당신의 하루를 더 빛나게 합니다. 오늘의 작은 변화를 즐기세요."
=========================================================================================


